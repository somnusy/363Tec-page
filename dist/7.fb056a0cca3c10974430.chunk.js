webpackJsonp([7],{26:function(t,e,a){a(59),a(60);var n=a(12)(a(48),a(82),"data-v-101908d5",null);n.options.__file="D:\\idea_workspace\\363Tec\\363Tec-page\\vue\\src\\views\\layout\\danmakuSend.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] danmakuSend.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},48:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){var t=this;return{danmakuTags:[],danmakutag:"",theme1:"light",danmakuType:"",lableValue:"",columns:[{type:"selection",width:60,align:"center"},{title:"内容",key:"content"},{title:"操作",key:"action",render:function(e,a){return e("Button-group",[e("i-button",{props:{type:"success"},on:{click:function(){t.sendDanmaku(a.row)}}},"发送")])}}],datas:[],preDatas:[],controlLcedit:"",controlIndex:"",controlAdedit:"",controlToLiveViewAngle:"",rankingPic:"",danmakuIndex:"",danmakuDataPage:"",area:"",ids:[]}},methods:{handleSelectAll:function(t){this.$refs.selection.selectAll(t)},sendDanmakus:function(){var t=this;if(null==t.ids||0==t.ids.length)return void t.$Message.error("请至少勾选一个弹幕!");null!=t.danmakuType&&""!=t.danmakuType||t.$http.post(BASE+"/importDanmaku/sendDanmaku.do",{ids:JSON.stringify(t.ids),danma:[],danmakutype:t.danmakuType,resourceId:t.concertID},{emulateJSON:!0}).then(function(e){"000000"==e.body.data.code?t.$Message.success("发送成功",2):t.$Message.error("发送失败",2)}).catch(function(e){t.$Message.error("未知错误",2)})},sendDanmaku:function(t){var e=this;if(null==e.ids||0==e.ids.length)return void e.$Message.error("请至少勾选一个弹幕!");e.$http.post(BASE+"/importDanmaku/sendDanmaku.do",{ids:JSON.stringify(e.ids),danma:[],danmakutype:e.danmakuType,resourceId:e.concertID},{emulateJSON:!0}).then(function(t){"000000"==t.body.data.code?e.$Message.success("发送成功",2):e.$Message.error("发送失败",2)}).catch(function(t){e.$Message.error("未知错误",2)})},removeDanmaku:function(t){var e=this,a=e.indexs.indexOf(t);a>-1&&e.indexs.splice(a,1)},selChange:function(t){var e=this;e.preDatas=t;for(var a=[],n=0;n<t.length;n++)a[n]=t[n].id;e.ids=a},tagChange:function(){},refreshTag:function(){var t=this;t.$http.post(BASE+"/importDanmaku/send.do",{concertID:t.concertID,danmakutag:t.danmakutag},{emulateJSON:!0}).then(function(e){var a=e.body.data;if("000000"==a.code){t.danmakuTags=a.data.danmakuTags,t.danmakutag=a.data.selecttag;var n=a.data.danmakuPreAudits;null!=n&&n.length>0?t.datas=n:t.datas=[]}else t.$Message.error("获取数据失败",2)}).catch(function(e){t.$Message.error("未知错误",2)})}},created:function(){var t=this.$route.params.concertID,e=this.$route.params.concertName;this.concertID=t,this.concertName=e;var a=this;a.controlLcedit="/livehost/lcedit/"+this.concertID+"/"+this.concertName,a.controlIndex="/livehost/index/"+this.concertID+"/"+this.concertName,a.controlAdedit="/livehost/adedit/"+this.concertID+"/"+this.concertName,a.controlToLiveViewAngle="/livehost/toLiveViewAngle/"+this.concertID+"/"+this.concertName,a.rankingPic="/livehost/rankingPic/"+this.concertID+"/"+this.concertName,a.danmakuIndex="/importDanmaku/index/"+this.concertID+"/"+this.concertName,a.danmakuDataPage="/importDanmaku/data/"+this.concertID+"/"+this.concertName,a.area="/livehost/area/"+this.concertID+"/"+this.concertName,a.starBoardOperation="/livehost/starBoardOperation/"+this.concertID+"/"+this.concertName,a.$http.post(BASE+"/importDanmaku/send.do",{concertID:a.concertID,danmakutag:a.danmakutag},{emulateJSON:!0}).then(function(t){var e=t.body.data;if("000000"==e.code){a.danmakuTags=e.data.danmakuTags;var n=e.data.danmakuPreAudits;null!=n&&n.length>0&&(alert(n),a.datas=n)}else a.$Message.error("获取数据失败",2)}).catch(function(t){a.$Message.error("未知错误",2)});var n={};history.pushState(n,"主页","/liveshow/index.html")}}},59:function(t,e){},60:function(t,e){},82:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Menu",{attrs:{mode:"horizontal",theme:t.theme1,"active-name":"1"}},[a("FONT",{staticClass:"font-class"},[t._v("\n\t\t\t\t\t基本信息\n\t\t\t\t")]),t._v(" "),a("font",{staticClass:"font-class1"},[t._v("演唱会id："+t._s(t.concertID))]),t._v(" "),a("font",{staticClass:"font-class1"},[t._v("演唱会名称："+t._s(t.concertName))])],1),t._v(" "),a("Menu",{attrs:{mode:"horizontal",theme:t.theme1,"active-name":"1"}},[a("FONT",{staticClass:"font-class"},[t._v("\n\t\t\t\t\t操作\n\t\t\t\t")]),t._v(" "),a("router-link",{staticClass:"menu-a-class",attrs:{to:t.controlLcedit}},[t._v("控制修改")]),t._v(" "),a("router-link",{staticClass:"menu-a-class",attrs:{to:t.controlIndex}},[t._v("直播修改")]),t._v(" "),a("router-link",{staticClass:"menu-a-class",attrs:{to:t.controlAdedit}},[t._v("广告修改")]),t._v(" "),a("router-link",{staticClass:"menu-a-class",attrs:{to:t.controlToLiveViewAngle}},[t._v("直播视角")]),t._v(" "),a("router-link",{staticClass:"menu-a-class",attrs:{to:t.rankingPic}},[t._v("贡献榜快照")]),t._v(" "),a("router-link",{staticClass:"menu-a-class",attrs:{to:t.starBoardOperation}},[t._v("星光榜运营")]),t._v(" "),a("router-link",{staticClass:"menu-a-class",attrs:{to:t.danmakuIndex}},[t._v("弹幕送审")]),t._v(" "),a("router-link",{staticClass:"menu-a-class",attrs:{to:t.danmakuDataPage}},[t._v("互动数据")]),t._v(" "),a("router-link",{staticClass:"menu-a-class",attrs:{to:t.area}},[t._v("省份筛选")]),t._v(" "),a("router-link",{staticClass:"menu-a-class",attrs:{to:"/livehost/adlist"}},[t._v("回到直播控制主页")])],1),t._v(" "),a("br"),t._v(" "),a("Form",{attrs:{model:t.formItem,"label-width":120,inline:""}},[a("FormItem",{attrs:{label:"选择标签:"}},[a("Select",{on:{"on-change":t.tagChange},model:{value:t.danmakutag,callback:function(e){t.danmakutag=e},expression:"danmakutag"}},t._l(t.danmakuTags,function(e){return a("Option",{attrs:{value:e.id}},[t._v(t._s(e.tagname))])}),1)],1),t._v(" "),a("Button",{attrs:{type:"success"},on:{click:t.refreshTag}},[t._v("刷新数据")]),t._v(" "),a("br"),t._v(" "),a("FormItem",{attrs:{label:"弹幕类型:"}},[a("Select",{model:{value:t.danmakuType,callback:function(e){t.danmakuType=e},expression:"danmakuType"}},[a("Option",{attrs:{value:""}},[t._v("-请选择-")]),t._v(" "),a("Option",{attrs:{value:"1"}},[t._v("颜色弹幕")]),t._v(" "),a("Option",{attrs:{value:"2"}},[t._v("气泡弹幕")]),t._v(" "),a("Option",{attrs:{value:"3"}},[t._v("道具弹幕")])],1)],1),t._v(" "),a("br"),t._v(" "),a("Button",{attrs:{type:"success"},on:{click:t.sendDanmakus}},[t._v("批量发送")])],1),t._v(" "),a("div",[a("Table",{ref:"selection",attrs:{border:"",columns:t.columns,data:t.datas},on:{"on-selection-change":t.selChange}}),t._v(" "),a("Button",{on:{click:function(e){t.handleSelectAll(!0)}}},[t._v("全选")]),t._v(" "),a("Button",{on:{click:function(e){t.handleSelectAll(!1)}}},[t._v("取消全选")])],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0}});